# BabySoC Functional Modeling: Understanding SoC Fundamentals and Pre-RTL Verification

## I. Abstract and Introduction  
### 1. Abstract  
This report explores the architectural basics of modern System-on-Chip (SoC) designs. It focuses on key components, structure and interconnect standards that allow complex systems to fit on a single die. A main principle of the VLSI design process is layout verification beginning with high-speed and zero-delay functional modeling. This approach applies specifically to the BabySoC a simplified open-source learning platform built using Sky130 technology. We perform functional simulation with behavioral Verilog using the Icarus Verilog compiler and analyze it using the GTKWave waveform viewer. 
This confirms the logical accuracy and operational order of the system's main IP cores, including the RVMYTH CPU, Phase-Locked Loop (PLL), and Digital-to-Analog Converter (DAC). Starting verification at this high level of abstraction is a smart engineering choice. It helps address system-level architectural problems before moving on to detailed Register Transfer Level (RTL) synthesis and later physical implementation stages.  

### 2. Introduction: SoC Importance and Pre-RTL Verification  
Modern electronic systems primarily depend on the System-on-Chip paradigm. This is characterized by the combination of subsystems including Central Processing Units (CPUs), various memory types, peripherals, and complex interconnect fabrics, all packed onto a single piece of silicon. The industry's ongoing goal of improving Power, Performance, and Area (PPA) drives this integration. 
We also have Commercial SoCs which are found in mobile computing like high-end mobile processors and in embedded applications such as the Raspberry Pi RP2040 and the STMicroelectronics STM32.  

- The strict PPA requirements require a structured and careful VLSI design process. The key initial phase occurs before creating detailed RTL models and is known as Pre-RTL Methodologies or system-level design. At this abstract level, architectural choices—such as processor cores and communication protocols—are tested using functional modeling to verify the system’s intended purpose. Validation at this early stage is important because these architectural decisions greatly affect the quality and success of the final product.  

The BabySoC platform is a simplified yet effective model for learning SoC concepts. It is an open-source design made with Sky130 technology and includes a range of IP cores like the RVMYTH RISC-V CPU, a PLL for clock generation and a DAC for converting digital signals to analog. The main goal is to create a method for zero-delay functional simulation using tools like Icarus Verilog and GTKWave which is a key verification step before proceeding to timing-critical phases.   

## II. Architecture and Core Components of a Modern System-on-Chip  
### 3. Defining the Heterogeneous SoC  
An SoC brings together various specialized IP cores onto one silicon die ranging from fully digital microprocessors to entirely analog blocks like 5G broadband modems. Besides basic processing, modern SoCs often include dedicated security features which are a priority for majority of organizations in recent design aspects. Analog and mixed-signal components handle precise clock generation or sensor interactions managing the link between digital computation and real-world signals. This makes them crucial for applications like IoT and automotive systems.  

### 4. Essential Digital and Mixed-Signal IP Cores  
#### 4.1. The Processing Subsystem(CPU)  
The Central Processing Unit (CPU) is the core of the SoC. We use the RVMYTH core, a basic RISC-V design to examine basic instruction fetching and execution in a system environment. Modern CPUs often work alongside specialized digital signal processors (DSPs) or hardware accelerators to efficiently manage computational tasks.  

#### 4.2. Memory Hierarchy and Mixed-Signal Interfaces  
SoCs use a tiered memory structure including *Cache memory* that bridges the speed gap between the processors and the slower main memory to enhance data access times.  

##### In the BabySoC, there are two main mixed-signal IPs:  

*Phase-Locked Loop (PLL)* : This generates an output signal that is synchronized with an input signal. It serves as the clock generator and controller for the entire SoC which is vital for synchronization and distribution across different IP domains.  

*Digital-to-Analog Converter (DAC)* : This converts digital signals generated by the RVMYTH core into continuous analog signals enabling the chip to interact with the outside environment and produce outputs like sound or video frames.  

### 5. The Critical Role of the Interconnect Fabric  
The interconnect fabric is the communication system that allows all components (masters and slaves) to exchange data efficiently.  

#### 5.1. Communication Standards: AHB vs AXI  
Many systems have traditionally used simple, shared bus architectures like the AMBA AHB (Advanced High-performance Bus). AHB works under a simplex model, dealing with either read or write transactions one at a time, which limits performance and scalability in systems with simultaneous needs.  

To overcome these challenges, the industry developed the high-performance AMBA AXI (Advanced eXtensible Interface). AXI improves throughput by using independent read and write channels allowing for full-duplex communication where reading and writing can happen at the same time. AXI also simplifies managing clock domain crossings by allowing the master to issue outstanding transactions which reduces latency significantly.  

#### 5.2. The Interconnect-PPA Trade-off  
Choosing between interconnect standards is a significant architectural decision that affects PPA. While AXI offers better performance, its multiple channels require more design effort and consume more power compared to the simpler and more energy-efficient AHB structure. For large systems, the Network-on-Chip (NoC) technology is implemented, using a packet-switched topology that separates data handling into transport and transaction layers. This ensures Quality of Service (QoS) and simplifies physical routing by preventing problematic high fan-out nets.  

*Table 1: Comparison of On-Chip Interconnect Standards* 

| Standard   | Communication Model                           | Latency Mechanism                         | Design Complexity                        | Scalability                                |
|------------|-----------------------------------------------|-------------------------------------------|------------------------------------------|--------------------------------------------|
| AMBA AHB   | Simplex (Read or Write only)                  | Waits for response before new transaction | Low, Power Efficient                     | Low (Shared Bus Contention)                |
| AMBA AXI   | Full-Duplex (Independent Channels)            | Outstanding Transactions (Pipelined)      | Increased Design and Verification Effort | Moderate/High (Better for multiple masters)|
| NoC        | Packet-Based Transport Layer                  | Independent routing and local control     | Very High (Requires specialized routing) | Highest (Ideal for complex, large SoCs)    |

## III. Functional Modeling and Abstraction in the VLSI Design Process  
### 6. VLSI Design Abstraction Hierarchy  
The VLSI design process carefully goes from system specification to physical layout data (GDSII). The Pre-RTL Methodologies stage happens before the design is formalized in RTL code. It includes high-level definitions of hardware (processors, memories) and software (firmware, OS) interactions. The architectural choices made at this stage greatly influence the final product's quality, even if implementation details are limited.  

### 7. Behavioral Modeling and the Zero-Delay Premise  
Behavioral modeling is the highest level of abstraction in Hardware Description Languages (HDLs) and is often called algorithmic modeling. The designer focuses on what the intended function should be instead of the physical gate structure. This is done using procedural constructs like the initial block (executed once at time zero) and the always block (executed continuously or triggered by events).  

Functional simulation confirms logical behavior using the zero-delay assumption, which ignores the actual timing delays of gates and wires and runs at maximum speed to quickly validate logical correctness against specifications.  

### 8. Transaction-Level Modeling (TLM) and Speed Requirement  
Standard RTL simulation can become too slow for complex SoCs.  

- Transaction-Level Modeling (TLM) speeds up simulation by abstracting communication interfaces and concentrating on high-level data transactions. TLM is essential for concurrent software development, allowing developers to rely on function-accurate models that operate at speeds between 10 million and 100 million instructions per second (ips). Early access to this high-speed functional platform prevents software development from becoming a scheduling bottleneck.  

## IV. Functional Verification of the BabySoC Platform and Methodology  
### 9. Functional Breakdown of BabySoC Components  
Functional modeling confirms the logical handshake and sequencing across the BabySoC’s main IP cores (RVMYTH, PLL, DAC, and the wrapper logic).  

*Table 2: Functional Breakdown of BabySoC Components* 

| IP Core   | Category             | Primary Function                              | Verification Focus in Functional Model                            |
|-----------|----------------------|-----------------------------------------------|-------------------------------------------------------------------|
| RVMYTH    | Digital Processor    | Instruction Fetch/Execute Engine (RISC-V)     | Correct sequencing of instructions and register manipulation.     |
| PLL       | Mixed-Signal/Control | Clock Generation and Synchronization          | Stable CLK signal output; adherence to specified phase behavior.  |
| DAC       | Mixed-Signal/I/O     | Converts Digital Data to Analog Output        | Logical transfer of digital data from CPU to converter interface. |

- The model must verify three critical operational sequences:  

1. *Clock Initialization*: Confirm the PLL starts correctly to produce the stable operational clock signal (CLK).  
2. *RVMYTH Execution*: Validate the RVMYTH CPU executes instructions stored in instruction memory (imem) accurately.  
3. *Data Output Path*: Ensure digital data moves correctly through the wrapper logic to the DAC interface pins.  

### 10. Practical Verification Flow (Icarus Verilog & GTKWave)  
The simulation uses Icarus Verilog (iVerilog) for compilation and simulation, along with GTKWave for visualization.  

The two-step verification process consists of:  

**Compilation:**  
```bash  
iverilog -o <output_filename> <design_file.v> <testbench_file.v>  
```  

**Runtime Execution:** The compiled output is run by vvp, creating the waveform dump file.  
```bash  
vvp <output_filename>  
```  

Waveform data is generated using Verilog system tasks in the testbench:  
```verilog  
// Waveform dump initialization in testbench  
initial begin  
    $dumpfile("test.vcd"); // Specifies output file name (Value Change Dump format)  
    $dumpvars(0, <top_module_name>); // Recursively captures signals in the module hierarchy  
end  
```  

For efficiency with complex SoCs, the FST (Fast Signal Trace) format is preferred over the default VCD format because FST files are much smaller and faster to handle in GTKWave. This is enabled during runtime:  
```bash  
vvp <output_filename> -fst  
```  

GTKWave processes the VCD or FST dump file, letting the engineer visualize and review the time-domain behavior of internal and external signals. This verifies that logical transitions meet specifications.  

## V. Conclusion and Outlook  
Successful functional simulation confirms the logical operation of the BabySoC based on a zero-delay assumption. However, this success does not ensure manufacturability or meeting frequency requirements. The VLSI process requires a clear separation between logical and physical verification:  

*Table 3: Abstraction Comparison in VLSI Verification Flow*

| Verification Aspect                 | Functional/Behavioral Simulation                 | Timing/Post-Layout Simulation                         | Goal                                                 |
|-------------------------------------|--------------------------------------------------|-------------------------------------------------------|------------------------------------------------------|
| Abstraction Level                   | Highest (Algorithmic or Behavioral code)         | Lowest (Gate-level Netlist)                           | Logical functionality verified.                      |
| Delay Model                         | Zero-Delay Assumption                            | Includes actual transistor, wire, and routing delays. | Functional success does not mean manufacturability.  |
| Execution Speed                     | Very Fast (High abstraction, 10-100M ips in TLM) | Significantly Slower                                  | Important for quick initial architecture validation. |

Thus, the logical foundation laid by functional modeling must be followed by RTL coding and subsequent timing simulation. The next focus will be on ensuring physical feasibility, confirming that the circuit meets tight timing requirements once actual propagation delays are introduced after synthesis and layout. The BabySoC learning experience provides the key groundwork for managing this vital transition in the VLSI design process.
